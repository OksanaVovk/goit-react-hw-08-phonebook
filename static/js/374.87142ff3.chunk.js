"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[374],{7374:function(e,n,t){t.r(n),t.d(n,{Contacts:function(){return j},default:function(){return g}});var r=t(5048),a=t(5122),c=t(6150),s=t(5861),o=t(885),i=t(7757),u=t.n(i),l=t(5984),d=t(2791),f=t(8896),h=t(5264),m=t(3329);function p(){var e=(0,d.useState)(""),n=(0,o.Z)(e,2),t=n[0],r=n[1],a=(0,d.useState)(""),i=(0,o.Z)(a,2),p=i[0],x=i[1],b=(0,c.Jx)().data,v=(0,l.x0)(),j=(0,l.x0)(),g=(0,c.Tn)(),y=(0,o.Z)(g,2),w=y[0],k=y[1].isLoading,C=function(e){var n=e.currentTarget,t=n.name,a=n.value;switch(t){case"name":r(a);break;case"phone":x(a);break;default:return}},N=function(){r(""),x("")},A=function(){var e=(0,s.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!b){e.next=20;break}if(!b.some((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))){e.next=7;break}h.Notify.failure("".concat(t," is already in contacts")),e.next=17;break;case 7:return e.prev=7,e.next=10,w({name:t,number:p});case 10:h.Notify.success("A new contact has been created"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(Error),h.Notify.warning("Contact could not be saved");case 17:N(),e.next=31;break;case 20:return e.prev=20,e.next=23,w({name:t,number:p});case 23:h.Notify.success("A new contact has been created"),e.next=30;break;case 26:e.prev=26,e.t1=e.catch(20),console.log(Error),h.Notify.warning("Contact could not be saved");case 30:N();case 31:case"end":return e.stop()}}),e,null,[[7,13],[20,26]])})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)("form",{onSubmit:A,children:[(0,m.jsxs)("label",{htmlFor:v,children:["Name",(0,m.jsx)("input",{type:"text",value:t,name:"name",onChange:C,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,m.jsxs)("label",{htmlFor:j,children:["Number",(0,m.jsx)("input",{type:"tel",value:p,name:"phone",onChange:C,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,m.jsxs)("button",{className:"main_button",type:"submit",disabled:k,children:[k&&(0,m.jsx)(f.Z,{}),"Add contact"]})]})}var x=function(e){var n=e.id,t=e.value,r=e.onChange;return(0,m.jsxs)("label",{htmlFor:n,children:["Find contacts by name",(0,m.jsx)("input",{id:n,type:"text",value:t,name:"filter",onChange:r})]})},b=function(e){var n=e.id,t=e.name,r=e.number,a=(0,c.Nt)(),i=(0,o.Z)(a,2),l=i[0],d=i[1].isLoading,p=function(){var e=(0,s.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(n);case 3:h.Notify.success("The contact has been deleted"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(Error),h.Notify.warning("Deletion error");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsx)("li",{children:(0,m.jsxs)("div",{className:"item_cont",children:[t,":",(0,m.jsx)("span",{children:r}),(0,m.jsxs)("button",{onClick:function(){return p(n)},disabled:d,children:[d&&(0,m.jsx)(f.Z,{}),"Delete"]})]})},n)},v=function(e){var n=e.contactArray;return(0,m.jsx)("ul",{children:n.map((function(e){return(0,m.jsx)(b,{id:e.id,name:e.name,number:e.number})}))})},j=function(){var e=(0,c.Jx)().data,n=(0,r.v9)((function(e){return e.filter})),t=(0,r.I0)(),s=(0,l.x0)(),o=function(){if(e){var t=n.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(t)}))}}();return(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{children:"Phonebook"}),(0,m.jsx)(p,{}),(0,m.jsx)("h2",{children:"Contacts"}),(0,m.jsx)(x,{id:s,value:n,onChange:function(e){t((0,a.M6)(e.currentTarget.value))}}),e&&(0,m.jsx)(v,{contactArray:n?o:e})]})},g=j},5984:function(e,n,t){t.d(n,{x0:function(){return r}});var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,n){return e+=(n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n>62?"-":"_"}),"")}}}]);
//# sourceMappingURL=374.87142ff3.chunk.js.map