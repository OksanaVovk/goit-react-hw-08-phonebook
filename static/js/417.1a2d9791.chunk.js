"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[417],{7417:function(e,n,t){t.r(n),t.d(n,{Contacts:function(){return N},default:function(){return _}});var r=t(5048),a=t(5122),c=t(6150),o=t(5861),s=t(885),i=t(7757),u=t.n(i),l=t(2791),d=t(835),f=t(5264),m=t(7205),h=t(3793),x=t(384),p=t(6015),v=t(803),b=t(4360),j=t(7414),g=t(3329),y=(0,b.Z)();function k(){var e=(0,l.useState)(""),n=(0,s.Z)(e,2),t=n[0],r=n[1],a=(0,l.useState)(""),i=(0,s.Z)(a,2),b=i[0],k=i[1],w=(0,c.Jx)().data,C=(0,c.Tn)(),Z=(0,s.Z)(C,2),N=Z[0],_=Z[1].isLoading,A=function(e){var n=e.currentTarget,t=n.name,a=n.value;switch(t){case"name":r(a);break;case"phone":k(a);break;default:return}},L=function(){r(""),k("")},S=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!w){e.next=20;break}if(!w.some((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))){e.next=7;break}f.Notify.failure("".concat(t," is already in contacts")),e.next=17;break;case 7:return e.prev=7,e.next=10,N({name:t,number:b});case 10:f.Notify.success("A new contact has been successfully created"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(Error),f.Notify.warning("Contact could not be saved");case 17:L(),e.next=31;break;case 20:return e.prev=20,e.next=23,N({name:t,number:b});case 23:f.Notify.success("A new contact has been created"),e.next=30;break;case 26:e.prev=26,e.t1=e.catch(20),console.log(Error),f.Notify.warning("Contact could not be saved");case 30:L();case 31:case"end":return e.stop()}}),e,null,[[7,13],[20,26]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsx)(j.Z,{theme:y,children:(0,g.jsxs)(v.Z,{component:"main",maxWidth:"xs",children:[(0,g.jsx)(h.ZP,{}),(0,g.jsx)(p.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"start"},children:(0,g.jsxs)(p.Z,{component:"form",onSubmit:S,noValidate:!0,sx:{mt:1},children:[(0,g.jsxs)("label",{children:["Name",(0,g.jsx)(x.Z,{margin:"normal",fullWidth:!0,id:"name",autoFocus:!0,type:"text",value:t,name:"name",onChange:A,required:!0})]}),(0,g.jsxs)("label",{children:["Number",(0,g.jsx)(x.Z,{margin:"normal",fullWidth:!0,id:"phone",autoComplete:"phone",autoFocus:!0,type:"tel",value:b,name:"phone",onChange:A,required:!0})]}),(0,g.jsxs)(m.Z,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},className:"main_button",type:"submit",disabled:_,children:[_&&(0,g.jsx)(d.Z,{}),"Add contact"]})]})})]})})}var w=function(e){var n=e.id,t=e.value,r=e.onChange;return(0,g.jsxs)("label",{htmlFor:n,children:["Find contacts by name",(0,g.jsx)("input",{id:n,type:"text",value:t,name:"filter",onChange:r})]})},C=function(e){var n=e.id,t=e.name,r=e.number,a=(0,c.Nt)(),i=(0,s.Z)(a,2),l=i[0],m=i[1].isLoading,h=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(n);case 3:f.Notify.success("The contact has been deleted"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(Error),f.Notify.warning("Deletion error");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsx)("li",{children:(0,g.jsxs)("div",{className:"item_cont",children:[t,":",(0,g.jsx)("span",{children:r}),(0,g.jsxs)("button",{onClick:function(){return h(n)},disabled:m,children:[m&&(0,g.jsx)(d.Z,{}),"Delete"]})]})},n)},Z=function(e){var n=e.contactArray;return(0,g.jsx)("ul",{children:n.map((function(e){return(0,g.jsx)(C,{id:e.id,name:e.name,number:e.number})}))})},N=function(){var e=(0,c.Jx)().data,n=(0,r.v9)((function(e){return e.filter})),t=(0,r.I0)(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,n){return e+((n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n>62?"-":"_")}),"")}(),s=function(){if(e){var t=n.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(t)}))}}();return(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{children:"Phonebook"}),(0,g.jsx)(k,{}),(0,g.jsx)("h2",{children:"Contacts"}),(0,g.jsx)(w,{id:o,value:n,onChange:function(e){t((0,a.M6)(e.currentTarget.value))}}),e&&(0,g.jsx)(Z,{contactArray:n?s:e})]})},_=N}}]);
//# sourceMappingURL=417.1a2d9791.chunk.js.map